To determine how many minutes John has to nap, we first need to calculate the total time he will spend on his homework and then subtract that from the total time he has before dinner.

1. **Calculate the total time for homework:**
   - Math homework: 20 minutes
   - Reading homework: 40 minutes
   - History homework: 20 minutes

   Now, we add these times together:
   \[
   \text{Total homework time} = \text{Math} + \text{Reading} + \text{History}
   \]
   \[
   \text{Total homework time} = 20 + 40 + 20 = 80 \text{ minutes}
   \]

2. **Convert the time before dinner into minutes:**
   John has 3 hours before dinner. We need to convert this into minutes:
   \[
   3 \text{ hours} = 3 \times 60 = 180 \text{ minutes}
   \]

3. **Calculate the time available for napping:**
   To find out how much time John has left for napping, we subtract the total homework time from the total time before dinner:
   \[
   \text{Time for nap} = \text{Total time before dinner} - \text{Total homework time}
   \]
   \[
   \text{Time for nap} = 180 - 80 = 100 \text{ minutes}
   \]

Thus, John has **100 minutes** to nap.

Final answer: **100 minutes**.