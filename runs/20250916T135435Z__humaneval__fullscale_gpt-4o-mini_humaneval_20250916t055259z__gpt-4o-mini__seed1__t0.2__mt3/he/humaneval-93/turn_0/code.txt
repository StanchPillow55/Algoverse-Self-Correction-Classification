def encode(message):
    # Define the vowels and their replacements
    vowels = {
        'a': 'c', 'e': 'g', 'i': 'k', 'o': 'q', 'u': 'w',
        'A': 'C', 'E': 'G', 'I': 'K', 'O': 'Q', 'U': 'W'
    }
    
    # Initialize an empty list to hold the encoded characters
    encoded_message = []
    
    # Iterate through each character in the message
    for char in message:
        # Swap case
        if char.islower():
            swapped_char = char.upper()
        else:
            swapped_char = char.lower()
        
        # Replace if it's a vowel
        if swapped_char in vowels:
            swapped_char = vowels[swapped_char]
        
        # Append the processed character to the result list
        encoded_message.append(swapped_char)
    
    # Join the list into a single string and return
    return ''.join(encoded_message)

# Example usage
print(encode('test'))  # Output: 'TGST'
print(encode('This is a message'))  # Output: 'tHKS KS C MGSSCGG'